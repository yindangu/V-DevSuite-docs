# 软件生命周期的管理

## 综述

### 部署

* 使用V-AppDesigner进行构件（类比模块）部署，表字段设计、sql查询、窗体、控件、布局、事件、业务逻辑、资源等，组成构件，以构件的粒度部署到云仓库VStore中（注：V-AppDesigner是V平台的开发工具，主要使用这个工具进行无码开发）
* VTeam管理企业中的各个项目的构件清单（注：VTeam是银弹谷提供的软件开发协同工具，可以对V平台开发的构件进行产品、项目包装，软件生命周期管理。介绍请详见[VTeam](http://www.yindangu.com)）
* V-AppServer执行系统，通过打包安装选择对应企业中对应项目的构件清单的方式，部署Web应用环境

### 运维和分析

#### 提供配置中心

配置系统参数

* 性能相关参数 
* 数据库连接相关参数 
* 第三方依赖工具的参数 
* 系统模块的参数

监控分析

* 内存 
* CPU 
* 线程 
* 日志 
* 慢请求 
* 关键步骤耗时

### 管理

#### 提供配置中心

配置系统参数

* 性能相关参数 
* 数据库连接相关参数 
* 第三方依赖工具的参数 
* 系统模块的参数

配置业务功能

* 流程 
* 权限 
* 组织机构 
* 系统集成 
* 门户 
* 登录 
* 初始化数据 
* 其他基础功能设置 
* 其他业务功能设置

## 部署和运行

### 具有分析能力的自动化部署

#### 自动生成快照版本

#### 标记主要版本、次要版本、自定义版本_（coming soon...）_

#### 对待部署的目标环境做检查分析

* 是否具备部署、升级条件
* 不符合条件的有回退策略_（coming soon...）_
* 有部署、升级故障恢复机制_（coming soon...）_

### 跨服务集群应用的零停机部署

集群自动部署升级_（coming soon...）_

零停机自定部署升级_（coming soon...）_

### 用户治理和控制

#### 对开发、运维人员做系统的访问控制约束

* VTeam上对项目的成员做授权
* 经过授权的人员可以使用VTeam账号访问项目相关运行环境的后台配置中心
* 对开发、运维人员做配置中心做更加细粒度的访问控制_（coming soon...）_

### 版本控制

* 项目可引用的平台特定版本 
* 项目上默认引用平台的最新版

### 用于部署管理的API

* 部署到VStore云仓库有对应的VStore API 
* 执行系统部署、升级环境有对应的打包工具API

## 监控与分析

### 性能监控

#### V平台提供云监控平台

* 请求耗时的时间分布，包括：成功的请求 失败的请求
* 请求调用链耗时记录 
* 内存 
* CPU 
* 吞吐量 
* 线程 
* 慢sql请求 
* 其他指标
* 图例

![&#x4E91;&#x76D1;&#x63A7;&#xFF0C;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x5173;&#x7CFB;&#x3001;&#x8BF7;&#x6C42;&#x8017;&#x65F6;&#x65F6;&#x95F4;&#x5206;&#x5E03;](../../.gitbook/assets/image%20%2854%29.png)

![&#x8BF7;&#x6C42;&#x8C03;&#x7528;&#x94FE;&#x8017;&#x65F6;&#x8BB0;&#x5F55;](../../.gitbook/assets/image%20%2870%29.png)

![CPU&#x3001;&#x5185;&#x5B58;&#x3001;&#x7EBF;&#x7A0B;&#x3001;&#x541E;&#x5410;&#x91CF;&#x3001;&#x54CD;&#x5E94;&#x8017;&#x65F6;...](../../.gitbook/assets/image%20%2853%29.png)

#### V平台提供V-AppServer（执行系统）本地监控功能

* CPU内存使用率
* http线程池任务状态监控
* 慢请求统计
* 服务启动统计数据
* 服务运行时统计数据
* 查询缓存监控
* 图例

![CPU&#x3001;&#x5185;&#x5B58;](../../.gitbook/assets/image%20%2858%29.png)

![&#x7EBF;&#x7A0B;&#x3001;&#x4EFB;&#x52A1;&#x7EDF;&#x8BA1;](../../.gitbook/assets/image%20%2861%29.png)

![jvm&#x5185;&#x5B58;&#x3001;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x3001;CPU&#x3001;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;](../../.gitbook/assets/image%20%2864%29.png)

#### 终端用户体验分析_（coming soon...）_

目标

* 什么是性能瓶颈？浏览器渲染？数据库？对 SAP 的调用？或者当客户通过 3G 网络使用应用程序时会发生什么？所有这些实际上都可能影响最终用户的整体体验
* 根据用户满意度的行业标准指标来衡量最终用户体验。有了这种衡量标准，开发人员将了解用户对应用程序的感受，并能够进一步深入了解所提供的信息，以在终端用户报告之前主动检测、排除故障和解决性能问题。

#### 客户分析_（coming soon...）_

目标

* 在开发或质量保证周期中，开发人员可以深入了解应用程序在浏览器中的呈现速度，客户端监控使得他们能查明每个网页甚至每个屏幕操作的性能问题。

#### 网络分析

* 云监控
* 服务器本地监控

目标

* 使团队能够基于监控数据深入研究网络问题。这对于识别仅在特定网络条件下出现的性能问题很有用
* 一个示例是仅在3G网络上速度较慢的特定页面。网络监控检测到它，然后使其对团队可见，他们可以优化应用程序以减少像设备发送的数据。_（coming soon...）_

#### 服务器分析

云监控

服务器本地监控

目标

* APDEX_（coming soon...）_

#### 业务活动监控

流程监控，流程实例的数据记录查看

目标

* 可以在现有应用程序或集群上快速创建流程。这通常用于知道用户完成现有的业务流程，例如订单审批、索赔处理等其他操作。通常，以此类业务流程相关的需要监控正在运行的流程的服务级别协议（SLA）合规性_（coming soon...）_
* 用于监控与优化流程执行效率_（coming soon...）_

#### 日志记录

目前已记录的日志

* 构件方法执行后，名称、耗时
* 规则执行后，名称、耗时
* Web请求执行后-Operation，名称、耗时
* 服务注册后 - 服务名
* 服务注销后 - 服务名
* 慢请求SQL - 查询语句，返回记录数，执行耗时
* 异常 - 异常堆栈、业务异常、系统异常、配置异常、环境异常等
* 模块各自业务逻辑记录的日志

目标日志捕获的时间

* 所有应用层的错误 - 目前基本具备
* 批处理执行 - sql批处理逻辑、其他业务批处理逻辑，如批量导入导出
* 入站和出站Web服务调用 - Operation调用-已记录
* 适配器、集成的自定义API调用 - 服务端构件方法API调用-已记录
* 页面访问 - _（coming soon...）_
* 数据库访问 - 记录关键数据库操作
* 客户端屏幕访问时间 -  _（coming soon...）_
* 日志存储在标准数据库 - 用户可以访问数据库构建自己的仪表板，也可以通过API实现_（coming soon...）_

#### 监控分析API

业务API的使用分析报告_（coming soon...）_

对API使用时间和使用频率的查看，随着时间推移收集趋势并提供有关某些应用程序运行情况的宝贵数据被用户接受_（coming soon...）_

## 应用程序的配置管理

### 定时任务

#### 可启用、停用已有定时任务

#### 可立即执行已有的定时任务

#### 可查看定时任务的执行情况

正常执行、异常执行

#### 可使用已有的服务端构件方法API注册新的定时任务

### 数据库连接

#### 提供数据库连接的配置管理

### WebService服务

#### WebService服务注册

服务输入输出参数无缝对接V平台规则链

可视化配置WebService服务的业务处理逻辑

#### WebService服务调用

提供通用规则调用WebService服务

### 业务流程

#### 审批流

可视化流程环节编排定义

* 环节
  * 路由环节 
    * 判断 - 可视化编辑判断表达式，可以搭配使用V平台函数库
    * 分支/汇聚 - 实现环节的并发，聚合
  * 人工环节
    * 审批类型
      * 多人抢占一人审批 - 产生多待办，谁先提交环节往下流转
      * 多人并行审批 - 产生多待办，全部提交环节往下流转
      * 多人串行审批 - 产生多待办，依次先后审批完成环节往下流转
  * 子流程环节
  * 机器环节
* 流转
  * 提交 - 提交到下一步环节 
  * 回退 - 回退到来源的某一步环节 
  * 取回 - 上一步环节取回下一步未审批待办 
  * 跳转 - 跳转到任意环节 
  * 环节内加签 - 前或后加签
* 处理策略
  * 启动条件策略 
  * 判断条件策略 
  * 自动流转策略
* 其他丰富的处理策略

可视化流程实例监控

流程归档

执行人选择策略

#### 业务流

应用架构平台

* 业务服务接口的编排
* 领域事件驱动

### 构件版本管理

* 执行系统环境中所有构件的版本、作者、部署时间、安装时间等详细信息
* 构件停用、启用、升级
* 回归到旧版本_（coming soon...）_

### 身份和访问管理

#### 登录控制

* 特定页面登录后才能访问
* 登录时长管理
* 账号密码验证策略 - 密码复杂程度
* 登录账号冻结

#### 权限

* 权限点
  * 功能权限
    * 窗体、控件的可用、可见，自定义功能权限点
    * 自定义功能权限点 - 一段特定的编码构成
  * 菜单权限
    * 菜单的可用
  * 数据权限
    * 数据过滤权限
* 授权对象
  * 组织机构 - 机构 岗位 人员
  * 用户组
  * 群组
  * 职务

#### 单点登录

* V平台单点登录方案

#### OAuth2.0集成

#### 社交媒体登录

* 微信 
* 企业微信 
* 钉钉

#### 对接外部用户管理系统_（coming soon...）_

* Activie Directory 
* LDAP

#### 外部身份提供商IdP_（coming soon...）_

* AzureAD 
* Okta 
* OneLogin
* SAML2.0

## 测试和质量保证

### 影响分析和自我修复

#### 开发部署前检查

* 合规性检查
* 依赖关系检查
* 完整性检查

### 用户反馈

#### 开发人员

开发工具V-AppDesigner提供反馈入口

#### 业务用户

* 执行系统V-AppServer在异常页面提供反馈入口
* 在正常的功能页面并没有提供需求反馈入口_（coming soon...）_
* 用户可以简单地在屏幕上绘图、添加语音注释或直接输入内容_（coming soon...）_
* 用户看到的注释的所有内容都成为开发人员可以查看的用户故事

### 测试应用程序

测试自动化最佳实践

* 构件或单元测试
* 集成和API测试
* UI测试

测试数据

* 支持自动从生产环境自动迁移到测试环境数据的工具

外部测试工具

* 单元测试
* 回归测试
* 功能（用户故事）测试
* 集成测试
* 负载测试

### 数据迁移

数据从生产环境复制到非生产环境_（coming soon...）_

## 处理技术债务

### 技术债务监控工具

#### _（coming soon...）_

## 实现团队协作

### 模块化的架构

V平台基于OSGi实现了物理上的模块化架构方案

### 大型组织中的多个团队

#### 隔离性

各个团队仅提交各自的需求处理单、缺陷处理单，由测试人员按照自己的测试团队的工作进度进行分配、验证，此过程可以并行，测试环境可以分离也可以统一，有测试团队决定，测试通过的任务单中的制品（构件）才合并到发版清单中。

#### 在部署计划中实现IT协作

开发人员仅需要专注各自开发任务单的提交，任务单中携带的制品（构件）将独立提交到测试阶段，测试人员安排独立或统一的测试环境进行扩展安装，测试通过后合并到测试阶段主清单，各个新增需求、变更需求、缺陷修复的任务都各自独立相互不干扰。

#### 复杂部署场景的分段控制

VTeam中的单个新增、修改任务携带的制品（构件）单独合并到测试阶段，或体验阶段合并为了提交补丁。

#### 联合方式的用户管理

VTeam提供项目内开发团队的定义

VTeam可以对开发团队进行授权角色

* 不同的角色对软件部署流水线上有不一样的管理权限

#### 运营审核

* 项目的实施角色才允许登录执行系统配置中心
* 登录配置中心后，在配置中心的所有操作，都会记录到后台日志中 - 仅有原始的日志文件记录
* 提供统一的可视化界面展现各个运营操作者的关键操作信息_（coming soon...）_

#### 入门模板规范化和引导应用程序

* V-AppBase已开源所有窗体类构件，供开发团队参考、定制
* 提供共享模板_（coming soon...）_
* 引导遵守标准的企业架构_（coming soon...）_
* 社区中寻求帮助_（coming soon...）_

#### 同一模块中的团队协作

VTeam提供不同粒度的开发成果迁移

* 项目总清单：包含项目所有构件
* 模块清单：包含模块相关的构件
* 任务清单
  * 新增需求：需求单相关的构件
  * 缺陷处理：缺陷单相关的构件

版本控制

* VStore能够追溯任何时候部署过的构件的时间戳版本
* 提供任何阶段的历史时间戳版本的下载功能

标记部署

* 对平台主清单提供了生成快照版本的功能
* 对项目清单提供生成快照版本功能_（coming soon...）_

比较和合并

* 构件提交前的比较和合并_（coming soon...）_

_解决冲突_

* _（coming soon...）_



## 版本和源码控制

#### 提供SVN中央仓库对源码进行管控

#### 提供VStore制品仓库对制品固件进行管控

